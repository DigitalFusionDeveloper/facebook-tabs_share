<table class='grid' style='width:100%;'>
  <tr>
    <td style='vertical-align:top;'>
        <%= link_to raw("Import &rarr;"), url_for(:action => :import), :title => 'Import Locations From CSV', :class => 'btn btn-success' %>
    </td>
    <td style='vertical-align:top;text-align:right;'>
      <form>
        <input type="search" name="search" placeholder="search" value="<%= params[:search] %>" />
      </form>
    </td>
  </tr>
</table>

<table class='table table-striped'>
  <thead>
    <th>
      URL
    </th>
    <th>
      Address
    </th>
    <th>
      Map
    </th>
    <th>
      Actions
    </th>
  </thead>

  <% @locations.each do |location| %>
  <tr>
    <td>
      <%= location.title %>
    </td>
    <td>
      <%= location.full_address %>
    </td>
    <td>
      <%=
        
        link_to('Map',
          location.map_url,
          'target' => :_blank, 'class' => 'map-lightbox', 'data-title' => location.title
        )
      %>
    </td>
    <td>
      ~
    </td>
  </tr>
  <% end %>

</table>

<br>
<%= paginate @locations.scoped %>

<script>


  jq(function(){

    jq(".map-lightbox").colorbox({
      rel:'map-lightbox',
      transition:"none",
      width:"80%",
      height:"80%",
      photo:true,
      title: function(){
        var url = $(this).attr('href');
        var title = $(this).data('title');
        return '<a href="' + url + '" target="_blank">' + title + '</a>';
      }
    });



  });


</script>
